{% import 'appbuilder/general/lib.html' as lib %}

<form id="filter_form" class="form-search" method="get">
<div class="table-responsive">

    <div class="btn-group">
  	<button type="button" class="btn btn-default dropdown-toggle" data-toggle="dropdown">
    		Action <span class="caret"></span>
  	</button>
    <ul class="dropdown-menu" role="menu">
    {% for flt_col in search_filters %}
    <li>
    	<a href="javascript:void(0)" class="filter" onclick="return false;">{{ form[flt_col].label }}</a>
    </li>
    {% endfor %}
    </ul>
    </div>
    
    <table class="table table-condensed filters">
       
    </table>

<table class="table table-condensed">    
    {% for col in include_cols %}
   		{% set field = form[col] %}
		{% if field.name not in exclude_cols %}
			<tr>{{ lib.render_field_search(field) }}</tr>
		{% endif %}
	{% endfor %}
    
</table>
</div>
{{ lib.btn_search() }}
</form>

<script>
	(function($) {
	var filter = new AdminFilters(
                    '#filter_form',
                    {
                    {%- for col in include_cols %}
                    '{{form[col].label.text}}': '{{ form[col]()|safe }}',
                    {%- endfor %}
                    },{
                    {%- for col in include_cols %}
                    '{{form[col].label.text}}': [
                        {%- for flt_name in search_filters[col] %}
                         '{{flt_name.name }}',
                        {%- endfor %} ],
                    {%- endfor %}
                    }
                );
	})(jQuery);
	
</script>
